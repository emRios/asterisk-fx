; extensions.conf - Dialplan mínimo para laboratorio Asterisk-AI-Voice-Agent
;
; Contexto interno: aquí cae la extensión 6001 (MicroSIP) y el código 700.
; El endpoint 6001 en pjsip.conf está configurado con context=internal

[internal]
; Llamar directamente a la extensión 6001 - prueba de eco (repite lo que dices)
exten => 6001,1,NoOp(Llamada directa a 6001 - Echo test)
 same => n,Answer()
 same => n,Echo()   ; Repite todo lo que dices - para probar audio bidireccional
 same => n,Hangup()

; Código 700: activa el agente de IA usando el contexto from-ai-agent-test
exten => 700,1,NoOp(AI Agent Test - Enviando a from-ai-agent-test)
 same => n,Goto(from-ai-agent-test,s,1)

; Contexto usado por el agente de IA
[from-ai-agent-test]
exten => s,1,NoOp(AI TEST Deepgram Prospectador)
 same => n,Set(AI_PROVIDER=deepgram)
 same => n,Set(AI_CONTEXT=prospectador_clientes_tc)
 same => n,Stasis(asterisk-ai-voice-agent)
 same => n,Hangup()

; Contexto por defecto (por si Asterisk cae aquí)
[default]
exten => _X.,1,NoOp(Default context - llamada a ${EXTEN})
 same => n,Hangup()